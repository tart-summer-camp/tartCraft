<!DOCTYPE html>
<html>
	<head>
		<script src="/socket.io/socket.io.js"></script>
		<script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
	</head>
	<body>
		<h2>login</h2>
		<form id="login" action="">
			Username: <input type="text" name="username" id="loginuser"/>
			Password: <input type="text" name="password" id="loginpass"/>
			<input type="submit" value="Login" name ="submit"/>
		</form>

		<br />
		<br />
		<h2>register</h2>
		<form id="register" action="">
			Username: <input type="text" name="username" id="reguser"/>
			Password: <input type="text" name="password" id="regpass"/>
			<input type="submit" value="Register" name ="submit"/>
		</form>

		<br />
		<br />
		<p id="result">

		</p>
		<script>
			var socket = io.connect('http://' + window.location.host); //get current host address to set nodejs server location automatically
			$("#login").submit(function() {
				socket.emit('login', {username:$("#loginuser").val(),password:$("#loginpass").val()});
				return false;
			});
			$("#register").submit(function() {
				socket.emit('register', {username:$("#reguser").val(),password:$("#regpass").val()});
				return false;
			});
			socket.on('login', function(data) {
				if(data){
					console.log('login successful');
					document.getElementById('result').innerHTML = 'login successful';
				}
				else{
					console.log('login not successful');
					document.getElementById('result').innerHTML = 'login not successful';
				}
			});
			socket.on('register', function(data) {
				if(data){
					console.log();
					document.getElementById('result').innerHTML = 'You can log in now';
				}
				else{
					console.log('Registeration failed');
					document.getElementById('result').innerHTML = 'Registeration failed';
				}
			});
		</script>
	</body>
</html>

